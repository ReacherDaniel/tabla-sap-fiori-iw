<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.ui.layout.form">

    <Dialog id="createDialog" title="Registro">
        <content>
            <f:SimpleForm editable="true" layout="ResponsiveGridLayout">
                <f:content>

                    <Label text="Sociedad" required="true" />
                    <ComboBox
                    items="{cascadeModel>/sociedades}"
                    selectedKey="{createModel>/IDSOCIEDAD}"
                    selectionChange=".onSociedadChange"
                    placeholder="Selecciona una Sociedad">
                    <core:Item key="{cascadeModel>key}" text="{cascadeModel>text}" />
                    </ComboBox>

                    <Label text="CEDI" required="true" />
                    <ComboBox
                    items="{cascadeModel>/cedis}"
                    selectedKey="{createModel>/IDCEDI}"
                    selectionChange=".onCediChange"
                    enabled="{= !!${createModel>/IDSOCIEDAD} }"
                    placeholder="Selecciona un CEDI">
                    <core:Item key="{cascadeModel>key}" text="{cascadeModel>text}" />
                    </ComboBox>

                    <Label text="Etiqueta" required="true" />

                    <HBox alignItems="Center">
                        
                        <ComboBox
                            items="{cascadeModel>/etiquetas}"
                            selectedKey="{createModel>/IDETIQUETA}"
                            selectionChange=".onEtiquetaChange"
                            enabled="{= !!${createModel>/IDCEDI} }"
                            placeholder="Selecciona una Etiqueta"
                            width="100%"
                        >
                            <core:Item key="{cascadeModel>key}" text="{cascadeModel>text}" />
                        </ComboBox>

                        <!-- Botón de filtros (solo icono y estilo, sin la funcionalidad previa) -->
                        <Button
                            icon="sap-icon://filter"
                            press=".onEtiquetaFilterPress"
                            tooltip="Filtros avanzados"
                            class="sapUiTinyMarginBegin"
                        />
                    </HBox>


                    <Label text="Valor" required="true" />
                    <ComboBox
                    items="{cascadeModel>/valores}"
                    selectedKey="{createModel>/IDVALOR}"
                    enabled="{= !!${createModel>/IDETIQUETA} }"
                    placeholder="Selecciona un Valor">
                    <core:Item key="{cascadeModel>key}" text="{cascadeModel>key}" />
                    </ComboBox>

                    <Label text="Grupo ET" />
                    <HBox alignItems="Center">
                    <!-- Input sólo lectura que mostrará la cadena final -->
                    <Input
                        id="idInputGrupoEt"
                        value="{createModel>/IDGRUPOET}"
                        editable="false"
                        width="100%" />
                    <!-- Botón para abrir modal de definir Grupo ET -->
                    <Button
                        icon="sap-icon://edit"
                        press=".onOpenGrupoEt"
                        tooltip="Definir Grupo ET"
                        class="sapUiTinyMarginBegin" />
                    </HBox>


                    <Label text="ID" />
                    <Input value="{createModel>/ID}" editable="true" />

                    <Label text="Información Adicional" required="true" />
                    <TextArea 
                        value="{createModel>/INFOAD}" 
                        editable="true" 
                        rows="4" 
                        width="100%" 
                    />

                </f:content>
            </f:SimpleForm>
        </content>
        <beginButton>
            <Button text="Guardar Cambios" type="Emphasized" press="onSaveCreate" />
        </beginButton>
        <endButton>
            <Button text="Cancelar" press="onCancelCreate" />
        </endButton>
    </Dialog>
</core:FragmentDefinition>
